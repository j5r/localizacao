<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Localiza√ß√£o</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; display: flex; justify-content: center; align-items: center; min-height: 100vh; margin: 0; background-color: #f0f2f5; }
        .container { background: white; padding: 2rem; border-radius: 12px; box-shadow: 0 4px 15px rgba(0,0,0,0.1); width: 100%; max-width: 400px; }
        h1 { color: #333; font-size: 1.5rem; margin-bottom: 1rem; text-align: center; }
        .campo { margin-bottom: 1rem; }
        label { display: block; margin-bottom: 0.5rem; color: #666; font-weight: bold; }
        input { width: 100%; padding: 12px; border: 1px solid #ddd; border-radius: 6px; box-sizing: border-box; font-size: 1rem; }
        
        .btn-colar { background-color: #9dd89d; margin-bottom: 1.5rem; color: #333;}
        .btn-gerar { background-color: #28a745; font-weight: bold; }
        
        button { width: 100%; padding: 12px; color: white; border: none; border-radius: 6px; font-size: 1rem; cursor: pointer; transition: opacity 0.3s; }
        button:hover { opacity: 0.9; }
        
        .divider { text-align: center; margin: 10px 0; color: #aaa; font-size: 0.8rem; }
    </style>
</head>
<body>

<div class="container">
    <h1>Localiza√ß√£o</h1>
    
    <button class="btn-colar" onclick="colarDoClipboard()">üìã Colar link do Maps <br><strong style="color:#a82424">(clique aqui para colar)</strong></button>
    
    <div class="divider">OU PREENCHA MANUALMENTE</div>

    <div class="campo">
        <label>Latitude</label>
        <input type="text" id="lat" placeholder="Ex: -20.456662" oninput="tratarInput(this)">
    </div>
    <div class="campo">
        <label>Longitude</label>
        <input type="text" id="lon" placeholder="Ex: -54.575978" oninput="tratarInput(this)">
    </div>

    <button class="btn-gerar" onclick="gerarPaginaB()">Gerar Links de App</button>
</div>

<script>
    // Fun√ß√£o para tratar entrada manual (v√≠rgula por ponto)
    function tratarInput(el) {
        el.value = el.value.replace(',', '.');
    }

    // FUN√á√ÉO PARA LER O CLIPBOARD E EXTRAIR COORDENADAS
    async function colarDoClipboard() {
    try {
        const texto = await navigator.clipboard.readText();
        
        // 1. Tenta o padr√£o de alta precis√£o (!3d...!4d) - Comum no Chrome/Desktop
        const regexGoogle = /!3d(-?\d+\.\d+)!4d(-?\d+\.\d+)/g;
        const matchesGoogle = [...texto.matchAll(regexGoogle)];

        if (matchesGoogle.length > 0) {
            const alvo = matchesGoogle[matchesGoogle.length - 1];
            document.getElementById('lat').value = alvo[1];
            document.getElementById('lon').value = alvo[2];
            return; // Sai da fun√ß√£o pois j√° resolveu
        }

        // 2. Fallback: Procura por qualquer par de n√∫meros decimais - Comum no Android/Manual
        // Busca n√∫meros que podem ter sinal de menos e ponto decimal
        const regexNumeros = /(-?\d+\.\d+)/g;
        const todosNumeros = [...texto.matchAll(regexNumeros)];

        if (todosNumeros.length >= 2) {
            // Pegamos os dois √∫ltimos n√∫meros encontrados (Latitude e Longitude)
            // No Android, se voc√™ copiar "-20.529, -54.613", eles ser√£o os √∫nicos
            const lon = todosNumeros[todosNumeros.length - 1][0];
            const lat = todosNumeros[todosNumeros.length - 2][0];
            
            document.getElementById('lat').value = lat;
            document.getElementById('lon').value = lon;
        } else {
            alert("N√£o encontrei coordenadas. Tente copiar os n√∫meros decimais diretamente do Maps.");
        }

    } catch (err) {
        alert("Erro ao ler √°rea de transfer√™ncia. Verifique as permiss√µes.");
    }
}


    // TEMPLATES DA P√ÅGINA B (MANTIDOS CONFORME O SEU PROJETO)
    const __maps = `<a href="https://www.google.com/maps/dir/?destination={lat},{long}&dir_action=navigate&api=1&travelmode=driving"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABwAAAAcCAMAAABF0y+mAAAA7VBMVEX////k7vyFrfE0geoUceiStfeOtPIAZuYAbecac+gzffAqe/Odvflwm+cAa+pChfR+qff2qKHSOkYwb9j+9vbpJgvqPi/qQSdXacRRjfVCg/oajKz1/PL2t7PpNSTqQzWBaK7A2P8+kMkipTuz27zwf3f/06K1zPpAi9s0qFMsp052wYnubGLpODb3ngD/++M0plwtpk5btnL0jRz7vAT+89bf6f8qnnDpMy3xeCX80Gcgo0btVhb7ugD8y1H+6bulwWq+sg393pfauBil1LD8xTTsug1AqU9RsmpXq0nm9Op0rUDF5M3E05iSzKBcyPClAAAA70lEQVR4AWKgOQC0PhaJDcQwAFS6YWZmlsOM7pbD+f9zuvJNzuaWuRhG6HgznE7D5bBzbo/X6XP6/YHgowuFfRb+SCQSiOouFk84LRkh9NxkKp3JOp25HKXmC0UmS+VKulytAdQsV280mWylK5Vym26dQBdFj8l+ujIYjtRCxlhMppoczOYLui1XAjXZWm/m8y3dejvECS9b2s/nc/lumh8CEXdNvoqcE/JzgiSB80VWfqNyP6DxK+fy70BucgSd0VzOT6g4wwOmvCi1u4INt51yd7BlOkG2P+MsEMUZnnAXghflqTyRczzCc85neA3/bO8jQZ8yDjIAAAAASUVORK5CYII=">Google Maps</a>`;
    const __waze = `<a href="https://waze.com/ul?ll={lat},{long}&navigate=yes"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAMAAABEpIrGAAAAnFBMVEX///8AAAAAAAAAAAAAAAAAAAAAAAAAAAAGBgYkJCQPDw8AAAAAAAAAAAARERGHh4ff39/////v7++bm5ssLCy/v78dHR0AAAAAAABAQEBjY2NTU1MvLy8AAACLi4sAAACPj4/Pz89eXl4vLy9fX18PDw+vr69vb28AAAA/Pz+fn59/f39PT08fHx8fHx9PT093d3cAAACsrKw9PT2OeT7UAAAANHRSTlMAMJDQ/+CgUPbg7nAQsPDu////9uj/6/Bg6+vt60D3IP//5P//////wP///+j/7f/wgPXnWPjZAAAAAVBJREFUeAGVkwVyxDAQBA1thngVhmNm+v/fUluW6zjQB4ZpseSc4no+ShBGzg2iAIiTJEnVyS7jvIDyoRLFPD6B757XHlA+ypHnF17fTvNX3o2c8QFHIw/4lEseeXUbIeRLrvnAt3mL2MgNXrBjKWjLLZ4JHKVDLDWmK5ZeT/+fiFTI6Nt8wNDmo5Eaj4R1F8ciSjViYESZwERL1G1MMU3Fs+ZuWFeVosIrco8EFfiHYKShuinMR1XTh4EosQo5qVgWzSjmjPSm0snu+CzFYgasxiLVEOb6/IDnBLA2cjRQGM1FKXEdLtZhvlkxm1R2wQOdpa3cwZS6FC705DbvTHWQO+LbxidBbrdTvBdzAJbmGJuv444L4X2Nctx47Rg/Px6ZVyxjDc24H0OheUPuc4V28Mj0NyFDQcfdoiY7psc2psfaXvPrs0uY623uqdoM8RsjPzADs0ZfiwAAAABJRU5ErkJggg==">Waze</a>`;
    const __uber = `<a href="https://m.uber.com/ul/?action=setPickup&dropoff[latitude]={lat}&dropoff[longitude]={long}{nickname_param}"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAACs0lEQVRYhc2Xv0sjURDHP5sfoo3BQjgkSlLYSLBTsBILKzvThFX80YSAYuMfcKDWNjbaGLDQcIXYi4X2NhGuSKFCgqIgeoKrZo3fK5LsRTfxzsNzb2CKt/PefL8z8+axA24ZBTLAd+AGKALPgN6pz5WzNxVfmYrvhvIFOPsLoPfqWQXLBf6vgV/rCxKfEXm9TADlunw2eFVH/cBXIPa6Jp8lPqDXK3Cg16DcJiGPCPwwKPdq0CMCtkH5wTA8IiCD8m30THy1i+7ubkzTdG0yTZNIJMLIyAh9fX0fTsLpy/n5eUly9askJZNJnZ6eKp1Of+hb8CIDtm03ZGnbNo+Pj9zf3wMQjUYb7g2Hw38cve/3W35JqVQiFothWRbHx8dIYn193bEvLi4iiXw+jyRmZmYAuLi44PDwEElMTEy4/DrpmJuba1iC6elpZbNZSVIikRCg4eFhSdLCwoLi8bgkaXBwUICSyaTj6/z8XIVCQdFo1OU7UMvEMN7uxqamJra2tshkMgDs7u6ysrLC+Pg4/f39FAoFpqamSKVS3N3dYds2y8vLGIZBOp3m5OTE5fNFCW5vbxuCl4PBuQNVsSyLYDBIIBDg4eEBy7KwLAuAtbU19vb28Pv9bwbmSvf29raz3tnZkSRNTk7q6OhIpVJJ4XDYsReLRa2urmp2dlaS1N7e7tg2NjYE6OrqSktLS3W7IPCajWmabG5uOhHncjmgnP6WlhZyuRz5fJ7r62va2to4ODgglUoBMDAwwOXlpWPb398HoLm5mUDABVU/A1WNx+MaGhoSoK6uLgWDQXV0dDj2sbEx9fT0uM6FQiElEglFIhHnW2dnp1pbW+vi/BdPsZcE5AOePCTw5AMsDwlYPmr+Tj2QMx+Q9ZBA1gd885CAg+3pYAL/wWhWJeHZcFornzqe/wReLF3cSdf4HAAAAABJRU5ErkJggg==">Uber</a>`;
    const __apps = `<a href="geo:{lat},{long}?q={lat},{long}{geo_nickname}"><img src="data:image/png;base64,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" alt=""></img>Outros Apps Android</a>`;
    const __apple = `<a href="https://maps.apple.com/?saddr=Current%20Location&daddr={apple_nickname}X@{lat},{long}&dirflg=d"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAAC5UlEQVR4Aa1XQ3hkQRjc+ynX2OZtbfu+tm3b1nlt27a9O4qNS5xxbdd+cTKvXydT31fJoPuvmvf6/ejw86dBlX6CwwQXCq6t5cLaz/xV4+ld6F8r9NdgsCAjIwf5+UUoLCwBydf8jN+JNQbBddzjDQM+gocErRSyWm2QgWu4lntq9/q01UAfwYKCgmK43W6ognu4lzEE+6oamCboLC0tR3vBGIwlOF2vgZm5uQWoqamBXrhcLpw5cxZ79uxFKxCxrGBMxpYZ6Eu33KAXNDp+/AQEBgbzv8Y6Kxi7+e1ofuAKVS/7zp27KE7i6dNnem5HAbVaM3CYh0YF/PWRkdEUpxHoQe3BPNTcQJCgTc9pT0tLh8VigdPpBLFv3368evVKBC7A16/fkJmZKX06qCXo39jAej67Wnjx4iVGjBiJ0NBwBAeHYsCAgTh48BCuXLmCKVOmIioqBrwS4eGRGDduPMxmMzyBWtRsbMCglWSePXuOkJAwCuhmnz79YLVaPSUrGjDWGQhgCvWEyspKdOrURUk8JiYO799/0Exg1KQ2DQxjHveEO3fuKomTPBcyUJPaNLCQxcQTNm3arGzAYDBABmoK7UU0sE7rAC5dukxJPCgoRPy6DMhATWpLDWzbtl35Cty//0DBgOQW3LhxU9nAsGEj4HA4dN0CySHkwvy6bKfECRMmISsrS34IZY8hMXnyFAZV5rFjx6WPoa5E9PnzZ2XxpKQUlJaWaiUik1IqXrBgkZKB06fPwBOKiv4fwA3Ni5FdK3NVVFSgd+++usRnzJilXIzII7JynJOTAxaa7t17Yt68+bh37z6+fPmKCxcuYvToMejVqzdWrVrNMi0rx4cVGxIFKDQkCi2ZAhRaMklTavWqeF6epCltxuneasvLyurb8lmqg0lfLw4m/dozmh0RtBUV6R/NuJZ7avf6eGs4ZeIwMoVmZrYcTvkZv+MarlUZTlUZIDi8diRfX8uFtZ8FqMb7Bx+2VJbBTrlcAAAAAElFTkSuQmCC"></img>Apple Maps</a>`
    const __indrive = `<a href="geo:{lat},{long}?q={lat},{long}{indrive_nickname}"><img src="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACAAAAAgCAYAAABzenr0AAADd0lEQVR4AcWXg5KkSxCF5z7CfYTLYNvGNda2bdu2bdu2bdtWb3DZMWfzNGr5/9Pjjvhmukt5qjKzkPWtz8Knxu8WPTH9KLQWNgjXhJjwWogL2QK+gGXxVJuXwnVhY3IMGUvGzMrkI42/F9oIF4T3AvLJ+9RYbTh2TsZ/FdakZoICJp4a+1c94/sEFDL7aOtby75aQBGxmjY/FdBGLXvREKfNtPEfhfNajRc/M2HJc5L8rsqfStkzhWrD8gxF0OaPFNBaK9oXPjKhz2oHWo5zE/Re6cCCh0kjU85b0GqCG81HedB8jAftprrRd60Dk89asPAxxWaUHa0oYP03G4iRObfN+L9WECZ7FCZHFP9UD2L2TTOWvDCh3zoHbN4ozE7BFYVFsPujiJQKo35/LyactGYiYj0FXNMT8F/NII0Q/F0tiFk3kgI4W5tPDLujsBJPEv6moD8qhDBoiz0nl1yjgJhWg7l3zSjXNABHMAJSumEAFEVfD95qh//vMDy/ReAWHAGugpASQxGR0mGM3GfTW4kYBbzWWyYu5bBddpAJJ6ygf1k+T8SNOWzDqAM2jNxvQ//1DjQY4KUoJYKrVr5ZUvSib6/E66yc0o+zXRYzEi79lxlCVBawbMBGO0IllAiuHN2l6r8gTgHZmgJktuOPWzF4mx1k3DG1AppQTIcZLgaoWoU6vbxa7bOz9Aabe8eMMo0DYHSTUg10l1OtypRzFvpfBeT/dYKa/ZQAzSyoFVSp9k8qC3QEqOAtWT8A9mNg/l4+hOlXLFicRwEqz7kPzLqZgYA7IqBeQPX7vUIRCqALJp62qkBk3xJ1xQV3tF2QXVACWM5ZthrvZgCqIKzbRz8I43kToNJPwXOi+xInfH9FVBo6QxH036Cfhq9zK4CzpJ9H7LNxg+KWiy7znajawQd3RBnn7FGxlZ9tdTeiWG4FcDY06v0jAleY23REbb/WT4z/Vi6E0Ydy3oqvZSyAaZg+DWV3s/uUQQXbkb+rBjFsp13POLlOARvydByv52moDFIIV4I5jybDPLwXKOM6bMjzhWTaRQvaT3eh9SQ32kx2o/NcFwZttmOqlKduTJlcSFpTwE95vpI9V+T1SvZT+l7YtjgupV9ey9cUoYA1tFm8D5Pif5rpP05bF8vjVIl4ZP7yeX49l8/zWKrPhvTzfOFj8zef5x8ACpF8DThKn2EAAAAASUVORK5CYII="></img>InDrive (Android)</a>`;

    const init = `
<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Selecionar Aplicativo</title>
  <style>
    body { font-family: sans-serif; text-align: center; background-color: #f9f9f9; padding: 20px; }
    ul { display: flex; flex-direction: row; list-style-type: none; padding: 0; flex-wrap: wrap; justify-content: center; }
    li { margin: 10px; background: white; padding: 15px; border-radius: 10px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); width: 120px; }
    a { align-items: center; display: flex; flex-direction: column; text-decoration: none; color: #333; font-weight: bold; font-size: 14px; }
    img { width: 45px; margin-bottom: 8px; }
    .acoes { margin-top: 30px; display: flex; flex-direction: column; gap: 10px; align-items: center; }
    
    /* Estilo da nova √°rea de link */
    #area-link { 
        display: none; 
        margin-top: 20px; 
        padding: 15px; 
        background: #e9ecef; 
        border-radius: 8px; 
        width: 100%; 
        max-width: 300px; 
        border: 1px solid #ccc;
    }
    #input-link { 
        width: 90%; 
        padding: 10px; 
        margin-top: 10px; 
        border: 1px solid #aaa; 
        border-radius: 4px; 
        font-size: 14px; 
    }
    
    .btn-share { padding: 12px 20px; border: none; background: #007bff; color: white; border-radius: 5px; cursor: pointer; font-weight: bold; width: 220px; }
    .btn-voltar { padding: 8px 15px; border: none; background: #666; color: white; border-radius: 5px; cursor: pointer; font-size: 12px; }
  </style>
</head>
<body>
  <h1>Para onde vamos?</h1>
  <ul>***</ul> 
  
  <div class="acoes">
    <button class="btn-share" id="btn-share" onclick="compartilharLink()">üîó Gerar link para compartilhar</button>
    
    <div id="area-link">
        <label style="font-size: 12px; font-weight: bold; color: #555;">LINK PRONTO:</label><br>
        <input type="text" id="input-link" readonly onclick="this.select()">
        <p style="font-size: 10px; color: #777; margin-top: 5px;">Toque no link acima para selecionar e copiar.</p>
    </div>

    <button class="btn-voltar" onclick="window.history.back()">Voltar e alterar</button>
  </div>

  <script>
    function compartilharLink() {
        const lat = "{lat_placeholder}";
        const lon = "{lon_placeholder}";
        
        let nomeLocal = prompt("D√™ um nome para este local (opcional):");
        
        let urlBase = "https://j5r.github.io/localizacao/";
        let urlFinal = urlBase + "?lat=" + lat + "&long=" + lon;
        
        if (nomeLocal && nomeLocal.trim() !== "") {
            urlFinal += "&nome=" + encodeURIComponent(nomeLocal);
        }

        // Exibe a √°rea do link e preenche o input
        const area = document.getElementById('area-link');
        const input = document.getElementById('input-link');
        const btn = document.getElementById('btn-share');

        area.style.display = 'block';
        input.value = urlFinal;
        
        // Rola a p√°gina para baixo para mostrar o link
        window.scrollTo({ top: document.body.scrollHeight, behavior: 'smooth' });
        
        // Opcional: Tenta selecionar automaticamente para facilitar
        input.select();
    }
  <\/script>
</body>
</html>`;

    function gerarPaginaB(nomeDaURL = "") {
    const lat = document.getElementById('lat').value;
    const long = document.getElementById('lon').value;

    if (!lat || !long) {
        alert("Preencha as coordenadas primeiro!");
        return;
    }

    // 1. L√≥gica do Nickname para o Uber
    let parametroApelido = "";
    let maps_nickname = "";
    let geo_nickname = "";
    let apple_nickname = "";
    let indrive_nickname = "";
    if (nomeDaURL && nomeDaURL.trim() !== "") {
        parametroApelido = `&dropoff[nickname]=${encodeURIComponent(nomeDaURL)}`;
        maps_nickname = `${encodeURIComponent(nomeDaURL)}`;
        geo_nickname = `(${encodeURIComponent(nomeDaURL)})`;
        apple_nickname = `${encodeURIComponent(nomeDaURL)}`;
        indrive_nickname = `(${encodeURIComponent(nomeDaURL)})`;
    }

    // 2. Substitui√ß√£o dos links dos aplicativos
    const linksHtml = `
        <li>${__maps.replace(/{lat}/g, lat).replace(/{long}/g, long).replace(/{maps_nickname}/g,maps_nickname)}</li>
        <li>${__waze.replace(/{lat}/g, lat).replace(/{long}/g, long)}</li>
        <li>${__apps.replace(/{lat}/g, lat).replace(/{long}/g, long).replace(/{geo_nickname}/g, geo_nickname)}</li>
        <li>${__apple.replace(/{lat}/g, lat).replace(/{long}/g, long).replace(/{apple_nickname}/g, apple_nickname)}</li>
        <li>${__uber.replace(/{lat}/g, lat).replace(/{long}/g, long).replace(/{nickname_param}/g, parametroApelido)}</li>
        <li>${__indrive.replace(/{lat}/g, lat).replace(/{long}/g, long).replace(/{indrive_nickname}/g, indrive_nickname)}</li>
    `;

    // 3. Montagem do HTML da P√°gina B com os placeholders de Latitude e Longitude
    // Note que aqui injetamos os valores que o bot√£o de compartilhar vai ler depois
    let fullHtml = init
        .replace("<h1>Para onde vamos?</h1>", `<h1>${nomeDaURL ? 'Links para: <br><strong style="color:#44aaff">' + nomeDaURL + '</strong>': 'Para onde vamos?'}</h1>`)
        .replace("***", linksHtml)
        .replace("{lat_placeholder}", lat)
        .replace("{lon_placeholder}", long);

    // 4. Cria√ß√£o do Blob e Redirecionamento
    const blob = new Blob([fullHtml], { type: 'text/html' });
    window.location.href = URL.createObjectURL(blob);
}

// Esta fun√ß√£o roda automaticamente assim que a p√°gina carrega
window.onload = function() {
    // 1. Pega os par√¢metros da URL (ex: ?lat=-20.45&long=-54.65&nome=Casa)
    const urlParams = new URLSearchParams(window.location.search);
    
    const lat = urlParams.get('lat');
    const long = urlParams.get('long');
    const nome = urlParams.get('nome');

    // 2. Se a latitude e longitude existirem na URL...
    if (lat && long) {
        // Preenche os campos da P√°gina A para que o usu√°rio veja o que est√° acontecendo
        document.getElementById('lat').value = lat;
        document.getElementById('lon').value = long;
        
        // Se voc√™ quiser que o nome apare√ßa na P√°gina B, 
        // podemos passar essa vari√°vel para a fun√ß√£o de gera√ß√£o
        console.log("Dados carregados via URL para:", nome || "Local n√£o identificado");

        // 3. Aguarda um pequeno instante (para garantir que o navegador est√° pronto) 
        // e gera a P√°gina B automaticamente
        setTimeout(() => {
            gerarPaginaB(nome); // Passamos o nome como opcional
        }, 500);
    }
}
</script>

</body>

</html>





